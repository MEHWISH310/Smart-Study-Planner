<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Tasks - Smart Study Planner</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #00BFFF; /* Sky Blue */
            --secondary: #FF69B4; /* Pink */
            --accent: #FFEB3B; /* Lemon Yellow */
            --light: #FFFFFF; /* White */
            --dark: #212529;
            --success: #4ade80;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray: #6c757d;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text: #333;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        .dark-mode {
            --primary: #00BFFF;
            --secondary: #4a1bc5;
            --accent: #5fd4f8;
            --light: #1a1a1a;
            --dark: #f8f9fa;
            --card-bg: rgba(30, 30, 30, 0.95);
            --text: #f0f0f0;
            --shadow: rgba(255, 255, 255, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background: linear-gradient(135deg, #00BFFF 0%, #FF69B4 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #23628d 0%, #8e3a64 100%);
        }

        /* Floating Background Objects */
        .floating-objects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .floating-object {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 15s infinite linear;
        }

        .floating-object:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 10%;
            left: 10%;
            animation-duration: 20s;
        }

        .floating-object:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 60%;
            left: 80%;
            animation-duration: 25s;
        }

        .floating-object:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 80%;
            left: 20%;
            animation-duration: 15s;
        }

        .floating-object:nth-child(4) {
            width: 100px;
            height: 100px;
            top: 30%;
            left: 70%;
            animation-duration: 30s;
        }

        .floating-object:nth-child(5) {
            width: 70px;
            height: 70px;
            top: 50%;
            left: 40%;
            animation-duration: 18s;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(20px, 40px) rotate(90deg);
            }
            50% {
                transform: translate(40px, 0) rotate(180deg);
            }
            75% {
                transform: translate(20px, -40px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Header Styles */
        header {
            background-color: var(--card-bg);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo {
            width: 80px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            width: 100%;
            height: auto;
            border-radius: 10%;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .nav-links a:hover {
            background-color: var(--primary);
            color: white;
        }

        .nav-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .theme-toggle {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 500;
        }

        .theme-toggle:hover {
            background: var(--secondary);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }

        .page-title {
            text-align: center;
            margin-bottom: 2rem;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 1.5rem;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px var(--shadow);
            backdrop-filter: blur(10px);
            min-height: 300px;
        }

        .card-full {
            grid-column: 1 / -1;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark-mode .card-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }

        /* Quick Add Task */
        .task-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-control {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: var(--light);
            color: var(--text);
        }

        .dark-mode .form-control {
            border: 1px solid #444;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        /* Task List */
        .task-list {
            list-style: none;
            max-height: 500px;
            overflow-y: auto;
        }

        .task-item {
            padding: 1rem;
            border-left: 4px solid var(--primary);
            background-color: var(--light);
            margin-bottom: 0.75rem;
            border-radius: 0 8px 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dark-mode .task-item {
            background-color: rgba(50, 50, 50, 0.7);
        }

        .task-info h3 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .task-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: var(--gray);
        }

        .task-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-icon {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray);
            font-size: 1.2rem;
        }

        .btn-icon:hover {
            color: var(--primary);
        }

        /* Task Filters */
        .task-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--primary);
            background: white;
            color: black;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .dark-mode .filter-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--primary);
            background: rgb(59, 55, 55);
            color: rgb(255, 254, 254);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: var(--secondary);
            color: white;
        }

        .filter-btn:hover {
            background: var(--secondary);
            color: white;
        }

        /* Task Stats */
        .task-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stat-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 1rem;
            flex: 1;
            min-width: 150px;
            text-align: center;
            box-shadow: 0 2px 4px var(--shadow);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Priority Indicators */
        .priority-high {
            color: var(--danger);
            font-weight: 600;
        }

        .priority-medium {
            color: var(--warning);
            font-weight: 600;
        }

        .priority-low {
            color: var(--success);
            font-weight: 600;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 2rem;
            color: var(--gray);
        }

        /* Footer */
        footer {
            background-color: var(--card-bg);
            backdrop-filter: blur(10px);
            padding: 2rem 2rem 1rem;
            margin-top: 1rem;
            box-shadow: 0 -4px 6px var(--shadow);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            align-items: flex-start;
            gap: 2rem;
        }

        .footer-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-logo .logo img {
            width: 70px;
            height: auto;
            margin-bottom: 0;
        }

        .footer-logo .logo-text {
            font-size: 1.6rem;
            font-weight: 700;
            line-height: 1.2;
        }

        .footer-about {
            line-height: 1.6;
            color: var(--gray);
            max-width: 400px;
        }

        .footer-heading {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .footer-links a {
            color: var(--text);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-contact p {
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 2rem auto 0;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .dark-mode .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .copyright {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .social-links {
            display: flex;
            gap: 1rem;
        }

        .social-links a {
            color: var(--text);
            font-size: 1.2rem;
            transition: color 0.2s;
            text-decoration: none;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: 2px solid var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .nav-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .footer-bottom {
                flex-direction: column;
                text-align: center;
            }
            
            .task-stats {
                flex-direction: column;
            }
            
            .task-filters {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Background Objects -->
    <div class="floating-objects">
        <div class="floating-object"></div>
        <div class="floating-object"></div>
        <div class="floating-object"></div>
        <div class="floating-object"></div>
        <div class="floating-object"></div>
    </div>

    <!-- Header -->
    <header>
        <a href="index.html" class="logo-container">
            <div class="logo"><img src="logo.png" alt="Smart Study Planner Logo"></div>
            <div class="logo-text">Smart Study Planner</div>
        </a>
        <nav class="nav-links">
            <a href="index.html">Dashboard</a>
            <a href="about.html">About Us</a>
            <a href="tasks.html" style="background-color: var(--primary); color: white;">My Tasks</a>
            <a href="goals.html">Study Goals</a>
            <a href="resources.html">Resources</a>
            <a href="progress.html">Progress</a>
        </nav>
        <div class="nav-controls">
            <a href="login.html" class="btn btn-outline" id="loginBtn">Login</a>
            <a href="signup.html" class="btn btn-primary" id="signupBtn">Sign Up</a>
            <button class="theme-toggle" id="themeToggle">
                <span id="themeIcon">üåô</span> <span id="themeText">Dark Mode</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <h1 class="page-title">My Tasks</h1>
        
        <!-- Task Statistics -->
        <div class="task-stats">
            <div class="stat-card">
                <div class="stat-number" id="totalTasks">0</div>
                <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedTasks">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="pendingTasks">0</div>
                <div class="stat-label">Pending</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="overdueTasks">0</div>
                <div class="stat-label">Overdue</div>
            </div>
        </div>

        <!-- Task Filters -->
        <div class="task-filters">
            <button class="filter-btn active" data-filter="all">All Tasks</button>
            <button class="filter-btn" data-filter="pending">Pending</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
            <button class="filter-btn" data-filter="overdue">Overdue</button>
            <button class="filter-btn" data-filter="high">High Priority</button>
            <button class="filter-btn" data-filter="medium">Medium Priority</button>
            <button class="filter-btn" data-filter="low">Low Priority</button>
        </div>

        <div class="dashboard-grid">
            <!-- Quick Add Task Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Add New Task</h2>
                </div>
                <form class="task-form" id="taskForm">
                    <div class="form-group">
                        <label for="taskTitle">Task Title</label>
                        <input type="text" id="taskTitle" class="form-control" placeholder="e.g., Math Homework Chapter 5" required>
                    </div>
                    <div class="form-group">
                        <label for="taskSubject">Subject</label>
                        <input type="text" id="taskSubject" class="form-control" placeholder="e.g., Mathematics" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDeadline">Deadline</label>
                        <input type="date" id="taskDeadline" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">Priority</label>
                        <select id="taskPriority" class="form-control">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Task</button>
                </form>
            </div>

            <!-- Task List Card -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Tasks</h2>
                    <span id="taskCount">0 tasks</span>
                </div>
                <ul class="task-list" id="taskList">
                    <!-- Tasks will be dynamically added here -->
                    <li class="empty-state">No tasks added yet. Create your first task!</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <div class="footer-logo">
                    <div class="logo"><img src="logo.png" alt="Smart Study Planner Logo"></div>
                    <div class="logo-text">Smart Study Planner</div>
                </div>
                <p class="footer-about">
                    Smart Study Planner is an innovative tool designed to help students organize their academic life efficiently. 
                    With intuitive task management, progress tracking, and smart reminders, our platform empowers students to 
                    achieve their academic goals while maintaining a healthy study-life balance.
                </p>
            </div>
            
            <div class="footer-section">
                <h3 class="footer-heading">Quick Links</h3>
                <div class="footer-links">
                    <a href="about.html">About Us</a>
                    <a href="features.html">Features</a>
                    <a href="pricing.html">Pricing</a>
                    <a href="testimonials.html">Testimonials</a>
                    <a href="blog.html">Blog</a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3 class="footer-heading">Resources</h3>
                <div class="footer-links">
                    <a href="studytips.html">Study Tips</a>
                    <a href="time.html">Time Management</a>
                    <a href="productivity.html">Productivity Tools</a>
                    <a href="academic.html">Academic Resources</a>
                    <a href="support.html">Support Center</a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3 class="footer-heading">Contact Us</h3>
                <div class="footer-contact">
                    <p><i class="fas fa-envelope"></i> info@smartstudyplanner.com</p>
                    <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Education Street, Learning City</p>
                </div>
                <div class="social-links">
                    <a href="www.facebook.com" title="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="www.twitter.com" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="www.instagram.com" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="www.linkedin.com" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="copyright">
                &copy; 2025 Smart Study Planner. All rights reserved.
            </div>
            <div class="footer-links">
                <a href="privacy.html">Privacy Policy</a>
                <a href="terms.html">Terms of Service</a>
                <a href="cookie.html">Cookie Policy</a>
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        const taskForm = document.getElementById('taskForm');
        const taskList = document.getElementById('taskList');
        const taskCount = document.getElementById('taskCount');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const totalTasksElement = document.getElementById('totalTasks');
        const completedTasksElement = document.getElementById('completedTasks');
        const pendingTasksElement = document.getElementById('pendingTasks');
        const overdueTasksElement = document.getElementById('overdueTasks');

        // Current filter
        let currentFilter = 'all';

        // Theme Toggle
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light Mode';
            } else {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark Mode';
            }
            saveToLocalStorage('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        });

        // Load saved theme
        const savedTheme = getFromLocalStorage('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            themeIcon.textContent = '‚òÄÔ∏è';
            themeText.textContent = 'Light Mode';
        }

        // Task Management
        let tasks = getFromLocalStorage('tasks') || [];

        // Display tasks on load
        displayTasks();
        updateTaskStats();

        // Add new task
        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = document.getElementById('taskTitle').value;
            const subject = document.getElementById('taskSubject').value;
            const deadline = document.getElementById('taskDeadline').value;
            const priority = document.getElementById('taskPriority').value;
            
            const newTask = {
                id: Date.now(),
                title,
                subject,
                deadline,
                priority,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(newTask);
            saveToLocalStorage('tasks', tasks);
            displayTasks();
            updateTaskStats();
            
            // Reset form
            taskForm.reset();
            
            // Show confirmation
            showNotification('Task added successfully!');
        });

        // Display tasks based on current filter
        function displayTasks() {
            if (tasks.length === 0) {
                taskList.innerHTML = '<li class="empty-state">No tasks added yet. Create your first task!</li>';
                taskCount.textContent = '0 tasks';
                return;
            }
            
            // Filter tasks based on current filter
            let filteredTasks = [...tasks];
            
            switch(currentFilter) {
                case 'pending':
                    filteredTasks = tasks.filter(task => !task.completed && !isOverdue(task.deadline));
                    break;
                case 'completed':
                    filteredTasks = tasks.filter(task => task.completed);
                    break;
                case 'overdue':
                    filteredTasks = tasks.filter(task => !task.completed && isOverdue(task.deadline));
                    break;
                case 'high':
                    filteredTasks = tasks.filter(task => task.priority === 'high');
                    break;
                case 'medium':
                    filteredTasks = tasks.filter(task => task.priority === 'medium');
                    break;
                case 'low':
                    filteredTasks = tasks.filter(task => task.priority === 'low');
                    break;
                default:
                    // 'all' - show all tasks
                    break;
            }
            
            if (filteredTasks.length === 0) {
                taskList.innerHTML = '<li class="empty-state">No tasks match the selected filter.</li>';
                taskCount.textContent = '0 tasks';
                return;
            }
            
            taskList.innerHTML = '';
            taskCount.textContent = `${filteredTasks.length} ${filteredTasks.length === 1 ? 'task' : 'tasks'}`;
            
            // Sort tasks by deadline (soonest first) and priority
            filteredTasks.sort((a, b) => {
                // First by completion status (incomplete first)
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1;
                }
                
                // Then by deadline (soonest first)
                const dateA = new Date(a.deadline);
                const dateB = new Date(b.deadline);
                if (dateA.getTime() !== dateB.getTime()) {
                    return dateA - dateB;
                }
                
                // Finally by priority (high to low)
                const priorityOrder = { high: 1, medium: 2, low: 3 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });
            
            filteredTasks.forEach(task => {
                const taskItem = document.createElement('li');
                taskItem.className = 'task-item';
                
                const daysUntilDue = Math.ceil((new Date(task.deadline) - new Date()) / (1000 * 60 * 60 * 24));
                let urgencyClass = '';
                
                if (daysUntilDue < 0 && !task.completed) {
                    urgencyClass = 'overdue';
                } else if (daysUntilDue <= 1 && !task.completed) {
                    urgencyClass = 'urgent';
                } else if (daysUntilDue <= 3 && !task.completed) {
                    urgencyClass = 'soon';
                }
                
                taskItem.innerHTML = `
                    <div class="task-info">
                        <h3>${task.title}</h3>
                        <div class="task-meta">
                            <span>${task.subject}</span>
                            <span>Due: ${formatDate(task.deadline)}</span>
                            <span class="priority-${task.priority}">${task.priority.toUpperCase()}</span>
                            ${urgencyClass ? `<span class="${urgencyClass}">${urgencyClass.toUpperCase()}</span>` : ''}
                        </div>
                    </div>
                    <div class="task-actions">
                        <button class="btn-icon toggle-complete" data-id="${task.id}">${task.completed ? '‚Ü∂' : '‚úì'}</button>
                        <button class="btn-icon delete-task" data-id="${task.id}">üóëÔ∏è</button>
                    </div>
                `;
                taskList.appendChild(taskItem);
                
                if (task.completed) {
                    taskItem.style.opacity = '0.7';
                    taskItem.style.borderLeftColor = 'var(--success)';
                } else if (urgencyClass === 'overdue') {
                    taskItem.style.borderLeftColor = 'var(--danger)';
                } else if (urgencyClass === 'urgent') {
                    taskItem.style.borderLeftColor = 'var(--warning)';
                }
            });
            
            // Add event listeners for task actions
            document.querySelectorAll('.toggle-complete').forEach(button => {
                button.addEventListener('click', toggleTaskComplete);
            });
            
            document.querySelectorAll('.delete-task').forEach(button => {
                button.addEventListener('click', deleteTask);
            });
        }

        // Update task statistics
        function updateTaskStats() {
            const total = tasks.length;
            const completed = tasks.filter(task => task.completed).length;
            const pending = tasks.filter(task => !task.completed && !isOverdue(task.deadline)).length;
            const overdue = tasks.filter(task => !task.completed && isOverdue(task.deadline)).length;
            
            totalTasksElement.textContent = total;
            completedTasksElement.textContent = completed;
            pendingTasksElement.textContent = pending;
            overdueTasksElement.textContent = overdue;
        }

        // Toggle task completion
        function toggleTaskComplete(e) {
            const taskId = parseInt(e.target.getAttribute('data-id'));
            const taskIndex = tasks.findIndex(task => task.id === taskId);
            
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = !tasks[taskIndex].completed;
                
                if (tasks[taskIndex].completed) {
                    tasks[taskIndex].completedAt = new Date().toISOString();
                } else {
                    delete tasks[taskIndex].completedAt;
                }
                
                saveToLocalStorage('tasks', tasks);
                displayTasks();
                updateTaskStats();
                
                showNotification(`Task marked as ${tasks[taskIndex].completed ? 'completed' : 'incomplete'}`);
            }
        }

        // Delete task
        function deleteTask(e) {
            const taskId = parseInt(e.target.getAttribute('data-id'));
            tasks = tasks.filter(task => task.id !== taskId);
            saveToLocalStorage('tasks', tasks);
            displayTasks();
            updateTaskStats();
            
            showNotification('Task deleted successfully!');
        }

        // Check if a task is overdue
        function isOverdue(deadline) {
            return new Date(deadline) < new Date();
        }

        // Filter tasks
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                button.classList.add('active');
                
                // Update current filter
                currentFilter = button.getAttribute('data-filter');
                
                // Display filtered tasks
                displayTasks();
            });
        });

        // Utility functions
        function formatDate(dateString, includeTime = false) {
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            };
            
            if (includeTime) {
                options.hour = '2-digit';
                options.minute = '2-digit';
            }
            
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        function saveToLocalStorage(key, value) {
            localStorage.setItem(key, JSON.stringify(value));
        }

        function getFromLocalStorage(key) {
            const item = localStorage.getItem(key);
            return item ? JSON.parse(item) : null;
        }

        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--success);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                z-index: 1000;
                transform: translateX(150%);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Animate out and remove after 3 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(150%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add some sample tasks if none exist
        if (tasks.length === 0) {
            const sampleTasks = [
                {
                    id: 1,
                    title: "Complete Math Assignment",
                    subject: "Mathematics",
                    deadline: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    priority: "high",
                    completed: false,
                    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 2,
                    title: "Read History Chapter 5",
                    subject: "History",
                    deadline: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    priority: "medium",
                    completed: true,
                    createdAt: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                    completedAt: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 3,
                    title: "Prepare Science Presentation",
                    subject: "Science",
                    deadline: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    priority: "medium",
                    completed: false,
                    createdAt: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 4,
                    title: "Write English Essay",
                    subject: "English",
                    deadline: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    priority: "high",
                    completed: false,
                    createdAt: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
                }
            ];
            
            tasks = sampleTasks;
            saveToLocalStorage('tasks', tasks);
            displayTasks();
            updateTaskStats();
        }
    </script>
</body>
</html>